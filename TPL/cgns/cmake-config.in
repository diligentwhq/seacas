EXTRA_ARGS=$@

# Have to set this to get TRY_RUN(...) commands to work
# export LD_LIBRARY_PATH=$MPI_BASE_DIR/lib:$LD_LIBRARY_PATH

CC='$(CC)'; export CC
CFLAGS='$(CFLAGS) $(PICFLAGS)'; export CFLAGS
CXX='$(CXX)'; export CXX
CXXFLAGS='$(CXXFLAGS) $(PICFLAGS)'; export CXXFLAGS
CPPFLAGS='-DNDEBUG'; export CPPFLAGS
AR_FLAGS='$(ARFLAGS)'; export AR_FLAGS
LDFLAGS='$(LDOPTIONS) $(EXTRA_LDOPTIONS)'; export LDFLAGS

rm -f CMakeCache.txt

cmake  \
-D CGNS_BUILD_SHARED:BOOL=OFF \
-D CGNS_ENABLE_HDF5:BOOL=ON \
-D HDF5_LIBRARY:FILEPATH=${PROJECTROOT}/lib/libhdf5.a \
-D HDF5_INCLUDE_PATH:PATH=${PROJECTROOT}/include \
-D HDF5_NEED_ZLIB:BOOL=ON \
-D CGNS_ENABLE_FORTRAN:BOOL=OFF \
-D CMAKE_INSTALL_PREFIX:PATH=${PROJECTROOT} \
$EXTRA_ARGS \
.



