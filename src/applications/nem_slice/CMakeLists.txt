INCLUDE(TribitsAddExecutable)
INCLUDE(TribitsLibraryMacros)
INCLUDE(CheckIncludeFile)
INCLUDE(FortranSettings)

if(${CMAKE_PROJECT_NAME} STREQUAL "SEACAS")
  TRIBITS_PACKAGE(Nemslice)
  ADD_DEFINITIONS(-DUSE_ZOLTAN)
else()
  INCLUDE(TribitsSubPackageMacros)
  TRIBITS_SUBPACKAGE(Nemslice)
  IF (${PACKAGE_NAME}_ENABLE_Zoltan)
     INCLUDE_DIRECTORIES(${Zoltan_INCLUDE_DIRS})
     SET(ZOLTAN_DEP zoltan)
  ADD_DEFINITIONS(-DUSE_ZOLTAN)
ENDIF()
endif()


INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

SET(HEADERS "")
APPEND_GLOB(SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/*.C)
CHECK_INCLUDE_FILE( sys/resource.h HAS_GETRUSAGE )

TRIBITS_ADD_EXECUTABLE(
  nem_slice
  NOEXEPREFIX
  NOEXESUFFIX
  SOURCES ${SOURCES}
  COMM serial mpi
  )
install_executable(nem_slice)

if(${CMAKE_PROJECT_NAME} STREQUAL "SEACAS")
  TRIBITS_PACKAGE_POSTPROCESS()
else()
  TRIBITS_SUBPACKAGE_POSTPROCESS()
endif()

