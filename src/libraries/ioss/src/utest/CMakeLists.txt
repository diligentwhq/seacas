INCLUDE(TribitsAddExecutableAndTest)

if(${CMAKE_PROJECT_NAME} STREQUAL "SEACAS")
  TRIBITS_SUBPACKAGE(IoUtest)
endif()

SET(HEADERS "")
SET(SOURCES "")

SET_AND_INC_DIRS(DIR ${CMAKE_CURRENT_SOURCE_DIR})
APPEND_GLOB(HEADERS ${DIR}/*.h)
APPEND_GLOB(SOURCES ${DIR}/*.C)

INCLUDE_DIRECTORIES(
  "${CMAKE_CURRENT_SOURCE_DIR}/../"
  "${CMAKE_CURRENT_BINARY_DIR}/../"
)

TRIBITS_ADD_EXECUTABLE(
  Utst_ioel
  SOURCES Utst_ioel.C
)

TRIBITS_ADD_TEST(
  Utst_ioel
  NAME Utst_ioel
  NUM_MPI_PROCS 1
  COMM serial
)

if(${CMAKE_PROJECT_NAME} STREQUAL "SEACAS")
  SET(PREFIX "SEACAS")
else()
  SET(PREFIX ${PACKAGE_NAME})
endif()
SET(ENABLED ${SEACAS_PREFIX}Exodus)
ASSERT_DEFINED(${PREFIX}_ENABLE_${ENABLED})
IF (${PREFIX}_ENABLE_${ENABLED})
  TRIBITS_ADD_EXECUTABLE(
    Utst_superelement
    SOURCES Utst_superelement.C
    NOEXEPREFIX NOEXESUFFIX
  )

  TRIBITS_ADD_TEST(
    Utst_superelement
    NAME Utst_superelement
    NUM_MPI_PROCS 1
    COMM serial
    ARGS ${CMAKE_CURRENT_SOURCE_DIR}/cbr2.ncf
  )
ENDIF()
